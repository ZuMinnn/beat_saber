# BÃO CÃO Äá»’ ÃN WEB

## GAME BEAT SABER WEB - Sá»¬ Dá»¤NG CÃ”NG NGHá»† NHáº¬N DIá»†N Cá»¬ CHá»ˆ TAY

---

**Giáº£ng viÃªn hÆ°á»›ng dáº«n:** [TÃªn giáº£ng viÃªn]

**Sinh viÃªn thá»±c hiá»‡n:** [TÃªn sinh viÃªn]

**MÃ£ sá»‘ sinh viÃªn:** [MSSV]

**Lá»›p:** [TÃªn lá»›p]

**NÄƒm há»c:** 2024 - 2025

---

## Má»¤C Lá»¤C

1. [Giá»›i thiá»‡u Ä‘á» tÃ i](#chÆ°Æ¡ng-1-giá»›i-thiá»‡u-Ä‘á»-tÃ i)
2. [CÆ¡ sá»Ÿ lÃ½ thuyáº¿t](#chÆ°Æ¡ng-2-cÆ¡-sá»Ÿ-lÃ½-thuyáº¿t)
3. [PhÃ¢n tÃ­ch vÃ  thiáº¿t káº¿ há»‡ thá»‘ng](#chÆ°Æ¡ng-3-phÃ¢n-tÃ­ch-vÃ -thiáº¿t-káº¿-há»‡-thá»‘ng)
4. [Triá»ƒn khai há»‡ thá»‘ng](#chÆ°Æ¡ng-4-triá»ƒn-khai-há»‡-thá»‘ng)
5. [Káº¿t quáº£ vÃ  Ä‘Ã¡nh giÃ¡](#chÆ°Æ¡ng-5-káº¿t-quáº£-vÃ -Ä‘Ã¡nh-giÃ¡)
6. [Káº¿t luáº­n vÃ  hÆ°á»›ng phÃ¡t triá»ƒn](#chÆ°Æ¡ng-6-káº¿t-luáº­n-vÃ -hÆ°á»›ng-phÃ¡t-triá»ƒn)
7. [TÃ i liá»‡u tham kháº£o](#tÃ i-liá»‡u-tham-kháº£o)

---

## CHÆ¯Æ NG 1: GIá»šI THIá»†U Äá»€ TÃ€I

### 1.1. LÃ½ do chá»n Ä‘á» tÃ i

Trong nhá»¯ng nÄƒm gáº§n Ä‘Ã¢y, cÃ´ng nghá»‡ nháº­n diá»‡n cá»­ chá»‰ (gesture recognition) Ä‘Ã£ phÃ¡t triá»ƒn máº¡nh máº½ vÃ  Ä‘Æ°á»£c á»©ng dá»¥ng rá»™ng rÃ£i trong nhiá»u lÄ©nh vá»±c nhÆ° Ä‘iá»u khiá»ƒn thiáº¿t bá»‹, y táº¿, giáº£i trÃ­ vÃ  giÃ¡o dá»¥c. Äáº·c biá»‡t, trong ngÃ nh cÃ´ng nghiá»‡p game, viá»‡c tÆ°Æ¡ng tÃ¡c báº±ng cá»­ chá»‰ mang Ä‘áº¿n tráº£i nghiá»‡m Ä‘á»™c Ä‘Ã¡o vÃ  háº¥p dáº«n cho ngÆ°á»i chÆ¡i.

Beat Saber lÃ  má»™t trÃ² chÆ¡i thá»±c táº¿ áº£o (VR) ná»•i tiáº¿ng, nÆ¡i ngÆ°á»i chÆ¡i sá»­ dá»¥ng kiáº¿m Ã¡nh sÃ¡ng Ä‘á»ƒ chÃ©m cÃ¡c khá»‘i theo nhá»‹p nháº¡c. Tuy nhiÃªn, game nÃ y yÃªu cáº§u thiáº¿t bá»‹ VR Ä‘áº¯t tiá»n, háº¡n cháº¿ kháº£ nÄƒng tiáº¿p cáº­n cá»§a nhiá»u ngÆ°á»i.

Xuáº¥t phÃ¡t tá»« nhá»¯ng lÃ½ do trÃªn, nhÃ³m Ä‘Ã£ quyáº¿t Ä‘á»‹nh xÃ¢y dá»±ng má»™t phiÃªn báº£n web cá»§a Beat Saber sá»­ dá»¥ng cÃ´ng nghá»‡ nháº­n diá»‡n cá»­ chá»‰ tay thÃ´ng qua webcam. Äiá»u nÃ y cho phÃ©p ngÆ°á»i dÃ¹ng tráº£i nghiá»‡m game mÃ  khÃ´ng cáº§n thiáº¿t bá»‹ VR, chá»‰ cáº§n má»™t mÃ¡y tÃ­nh cÃ³ webcam vÃ  káº¿t ná»‘i internet.

### 1.2. Má»¥c tiÃªu Ä‘á» tÃ i

**Má»¥c tiÃªu tá»•ng quÃ¡t:**
- XÃ¢y dá»±ng má»™t á»©ng dá»¥ng web game Beat Saber sá»­ dá»¥ng cÃ´ng nghá»‡ nháº­n diá»‡n cá»­ chá»‰ tay.

**Má»¥c tiÃªu cá»¥ thá»ƒ:**
- NghiÃªn cá»©u vÃ  Ã¡p dá»¥ng thÆ° viá»‡n MediaPipe Ä‘á»ƒ nháº­n diá»‡n cá»­ chá»‰ tay tá»« webcam.
- XÃ¢y dá»±ng giao diá»‡n 3D tÆ°Æ¡ng tÃ¡c sá»­ dá»¥ng Three.js vÃ  React Three Fiber.
- Thiáº¿t káº¿ há»‡ thá»‘ng backend RESTful API vá»›i Node.js vÃ  Express.
- Triá»ƒn khai há»‡ thá»‘ng xÃ¡c thá»±c ngÆ°á»i dÃ¹ng an toÃ n vá»›i JWT.
- XÃ¢y dá»±ng báº£ng xáº¿p háº¡ng (leaderboard) vÃ  lÆ°u trá»¯ Ä‘iá»ƒm sá»‘.
- Tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t Ä‘á»ƒ Ä‘áº£m báº£o game cháº¡y mÆ°á»£t mÃ .

### 1.3. Äá»‘i tÆ°á»£ng vÃ  pháº¡m vi nghiÃªn cá»©u

**Äá»‘i tÆ°á»£ng nghiÃªn cá»©u:**
- CÃ´ng nghá»‡ nháº­n diá»‡n cá»­ chá»‰ tay MediaPipe
- Framework React vÃ  Three.js cho phÃ¡t triá»ƒn giao diá»‡n 3D
- Node.js vÃ  Express cho phÃ¡t triá»ƒn backend
- MongoDB cho lÆ°u trá»¯ dá»¯ liá»‡u

**Pháº¡m vi nghiÃªn cá»©u:**
- XÃ¢y dá»±ng game Beat Saber phiÃªn báº£n web
- Há»‡ thá»‘ng ngÆ°á»i dÃ¹ng (Ä‘Äƒng kÃ½, Ä‘Äƒng nháº­p, quáº£n lÃ½ há»“ sÆ¡)
- Há»‡ thá»‘ng lÆ°u trá»¯ vÃ  hiá»ƒn thá»‹ Ä‘iá»ƒm sá»‘
- TÃ¹y chá»‰nh kiáº¿m (mÃ u sáº¯c, Ä‘á»™ dÃ i, Ä‘á»™ dÃ y)
- PhÃ¢n tÃ­ch Ã¢m thanh Ä‘á»ƒ táº¡o báº£n Ä‘á»“ note tá»± Ä‘á»™ng

### 1.4. PhÆ°Æ¡ng phÃ¡p nghiÃªn cá»©u

- **PhÆ°Æ¡ng phÃ¡p nghiÃªn cá»©u tÃ i liá»‡u:** Thu tháº­p vÃ  phÃ¢n tÃ­ch tÃ i liá»‡u vá» MediaPipe, Three.js, React, Node.js.
- **PhÆ°Æ¡ng phÃ¡p thá»±c nghiá»‡m:** XÃ¢y dá»±ng vÃ  kiá»ƒm thá»­ á»©ng dá»¥ng thá»±c táº¿.
- **PhÆ°Æ¡ng phÃ¡p phÃ¢n tÃ­ch:** ÄÃ¡nh giÃ¡ hiá»‡u suáº¥t vÃ  tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng.

---

## CHÆ¯Æ NG 2: CÆ  Sá» LÃ THUYáº¾T

### 2.1. Tá»•ng quan vá» cÃ´ng nghá»‡ nháº­n diá»‡n cá»­ chá»‰

#### 2.1.1. KhÃ¡i niá»‡m nháº­n diá»‡n cá»­ chá»‰

Nháº­n diá»‡n cá»­ chá»‰ (Gesture Recognition) lÃ  cÃ´ng nghá»‡ cho phÃ©p mÃ¡y tÃ­nh hiá»ƒu vÃ  diá»…n giáº£i cÃ¡c cá»­ chá»‰ cá»§a con ngÆ°á»i nhÆ° lÃ  Ä‘áº§u vÃ o. CÃ´ng nghá»‡ nÃ y sá»­ dá»¥ng cÃ¡c thuáº­t toÃ¡n xá»­ lÃ½ áº£nh vÃ  há»c mÃ¡y Ä‘á»ƒ phÃ¡t hiá»‡n, theo dÃµi vÃ  phÃ¢n loáº¡i cÃ¡c cá»­ chá»‰.

#### 2.1.2. MediaPipe Hand Landmarker

MediaPipe lÃ  framework mÃ£ nguá»“n má»Ÿ cá»§a Google, cung cáº¥p cÃ¡c giáº£i phÃ¡p AI sáºµn sÃ ng sá»­ dá»¥ng cho nhiá»u tÃ¡c vá»¥ nhÆ° nháº­n diá»‡n khuÃ´n máº·t, tay, tÆ° tháº¿ cÆ¡ thá»ƒ.

**MediaPipe Hand Landmarker** cÃ³ thá»ƒ:
- PhÃ¡t hiá»‡n sá»± hiá»‡n diá»‡n cá»§a bÃ n tay trong hÃ¬nh áº£nh
- XÃ¡c Ä‘á»‹nh 21 Ä‘iá»ƒm Ä‘áº·c trÆ°ng (landmark) trÃªn má»—i bÃ n tay
- PhÃ¢n biá»‡t tay trÃ¡i vÃ  tay pháº£i
- Hoáº¡t Ä‘á»™ng theo thá»i gian thá»±c vá»›i Ä‘á»™ trá»… tháº¥p

**Cáº¥u trÃºc 21 Ä‘iá»ƒm landmark:**
```
0 - WRIST (Cá»• tay)
1-4 - THUMB (NgÃ³n cÃ¡i)
5-8 - INDEX FINGER (NgÃ³n trá»)
9-12 - MIDDLE FINGER (NgÃ³n giá»¯a)
13-16 - RING FINGER (NgÃ³n Ã¡p Ãºt)
17-20 - PINKY (NgÃ³n Ãºt)
```

### 2.2. CÃ´ng nghá»‡ Ä‘á»“ há»a 3D trÃªn Web

#### 2.2.1. Three.js

Three.js lÃ  thÆ° viá»‡n JavaScript Ä‘á»ƒ táº¡o vÃ  hiá»ƒn thá»‹ Ä‘á»“ há»a 3D trÃªn trÃ¬nh duyá»‡t web sá»­ dá»¥ng WebGL. CÃ¡c tÃ­nh nÄƒng chÃ­nh:
- Táº¡o cÃ¡c Ä‘á»‘i tÆ°á»£ng 3D (hÃ¬nh há»c, váº­t liá»‡u, Ã¡nh sÃ¡ng)
- Äiá»u khiá»ƒn camera vÃ  hiá»‡u á»©ng Ä‘á»• bÃ³ng
- Há»— trá»£ texture, animation
- Hiá»‡u suáº¥t cao nhá» táº­n dá»¥ng GPU

#### 2.2.2. React Three Fiber

React Three Fiber lÃ  thÆ° viá»‡n React renderer cho Three.js, cho phÃ©p:
- Sá»­ dá»¥ng cÃº phÃ¡p JSX Ä‘á»ƒ táº¡o scene 3D
- TÃ­ch há»£p hoÃ n háº£o vá»›i React ecosystem
- Quáº£n lÃ½ state vÃ  lifecycle dá»… dÃ ng
- Tá»‘i Æ°u hiá»‡u suáº¥t tá»± Ä‘á»™ng

#### 2.2.3. React Three Drei

Drei lÃ  táº­p há»£p cÃ¡c helper vÃ  abstraction há»¯u Ã­ch cho React Three Fiber:
- Pre-built components (Environment, Grid, Trail, etc.)
- CÃ¡c hook tiá»‡n Ã­ch
- CÃ¡c hiá»‡u á»©ng Ä‘áº·c biá»‡t

### 2.3. CÃ´ng nghá»‡ Backend

#### 2.3.1. Node.js vÃ  Express

Node.js lÃ  runtime JavaScript phÃ­a server, cho phÃ©p xÃ¢y dá»±ng á»©ng dá»¥ng web hiá»‡u suáº¥t cao. Express.js lÃ  framework web tá»‘i giáº£n cho Node.js.

**Æ¯u Ä‘iá»ƒm:**
- Non-blocking I/O
- Event-driven architecture
- NPM ecosystem phong phÃº
- JavaScript full-stack

#### 2.3.2. MongoDB

MongoDB lÃ  cÆ¡ sá»Ÿ dá»¯ liá»‡u NoSQL document-oriented:
- LÆ°u trá»¯ dá»¯ liá»‡u dáº¡ng BSON (Binary JSON)
- Schema linh hoáº¡t
- Horizontal scaling
- Aggregation framework máº¡nh máº½

#### 2.3.3. JWT (JSON Web Token)

JWT lÃ  tiÃªu chuáº©n má»Ÿ (RFC 7519) Ä‘á»ƒ truyá»n thÃ´ng tin an toÃ n:
- Stateless authentication
- Chá»¯ kÃ½ sá»‘ Ä‘áº£m báº£o toÃ n váº¹n
- CÃ³ thá»ƒ chá»©a claims tÃ¹y chá»‰nh

### 2.4. CÃ¡c khÃ¡i niá»‡m vá» Game Rhythm

#### 2.4.1. Beat vÃ  BPM

- **Beat:** Nhá»‹p Ä‘áº­p cÆ¡ báº£n cá»§a bÃ i nháº¡c
- **BPM (Beats Per Minute):** Sá»‘ nhá»‹p má»—i phÃºt, xÃ¡c Ä‘á»‹nh tá»‘c Ä‘á»™ bÃ i nháº¡c

#### 2.4.2. Note Chart

Note chart lÃ  báº£n Ä‘á»“ cÃ¡c note trong game, Ä‘á»‹nh nghÄ©a:
- Thá»i Ä‘iá»ƒm xuáº¥t hiá»‡n (timing)
- Vá»‹ trÃ­ (lane, layer)
- HÆ°á»›ng chÃ©m (cut direction)
- Loáº¡i note (tay trÃ¡i/pháº£i)

---

## CHÆ¯Æ NG 3: PHÃ‚N TÃCH VÃ€ THIáº¾T Káº¾ Há»† THá»NG

### 3.1. PhÃ¢n tÃ­ch yÃªu cáº§u

#### 3.1.1. YÃªu cáº§u chá»©c nÄƒng

**A. Module Game:**
| STT | Chá»©c nÄƒng | MÃ´ táº£ |
|-----|-----------|-------|
| 1 | Nháº­n diá»‡n tay | Sá»­ dá»¥ng webcam Ä‘á»ƒ theo dÃµi vá»‹ trÃ­ hai tay |
| 2 | Hiá»ƒn thá»‹ scene 3D | Render mÃ´i trÆ°á»ng game, notes, sabers |
| 3 | PhÃ¡t nháº¡c | PhÃ¡t bÃ i hÃ¡t Ä‘á»“ng bá»™ vá»›i notes |
| 4 | Xá»­ lÃ½ va cháº¡m | Kiá»ƒm tra saber cÃ³ chÃ©m trÃºng note khÃ´ng |
| 5 | TÃ­nh Ä‘iá»ƒm | TÃ­nh Ä‘iá»ƒm dá»±a trÃªn Ä‘á»™ chÃ­nh xÃ¡c |
| 6 | Combo & Multiplier | TÄƒng há»‡ sá»‘ nhÃ¢n khi chÃ©m liÃªn tiáº¿p |

**B. Module User:**
| STT | Chá»©c nÄƒng | MÃ´ táº£ |
|-----|-----------|-------|
| 1 | ÄÄƒng kÃ½ | Táº¡o tÃ i khoáº£n má»›i |
| 2 | ÄÄƒng nháº­p | XÃ¡c thá»±c ngÆ°á»i dÃ¹ng |
| 3 | Xem há»“ sÆ¡ | Hiá»ƒn thá»‹ thá»‘ng kÃª cÃ¡ nhÃ¢n |
| 4 | TÃ¹y chá»‰nh saber | Thay Ä‘á»•i mÃ u, kÃ­ch thÆ°á»›c kiáº¿m |

**C. Module Leaderboard:**
| STT | Chá»©c nÄƒng | MÃ´ táº£ |
|-----|-----------|-------|
| 1 | LÆ°u Ä‘iá»ƒm | LÆ°u káº¿t quáº£ chÆ¡i vÃ o database |
| 2 | Xem báº£ng xáº¿p háº¡ng | Hiá»ƒn thá»‹ top ngÆ°á»i chÆ¡i |
| 3 | Lá»c theo Ä‘á»™ khÃ³ | Filter theo Easy/Medium/Hard |

#### 3.1.2. YÃªu cáº§u phi chá»©c nÄƒng

- **Hiá»‡u suáº¥t:** Game pháº£i cháº¡y â‰¥30 FPS trÃªn cÃ¡c thiáº¿t bá»‹ trung bÃ¬nh
- **Äá»™ trá»…:** Äá»™ trá»… nháº­n diá»‡n tay <100ms
- **Báº£o máº­t:** Máº­t kháº©u Ä‘Æ°á»£c mÃ£ hÃ³a bcrypt
- **Kháº£ dá»¥ng:** TÆ°Æ¡ng thÃ­ch cÃ¡c trÃ¬nh duyá»‡t Chrome, Firefox, Edge
- **Giao diá»‡n:** Thiáº¿t káº¿ hiá»‡n Ä‘áº¡i, responsive

### 3.2. Thiáº¿t káº¿ kiáº¿n trÃºc há»‡ thá»‘ng

#### 3.2.1. Kiáº¿n trÃºc tá»•ng quan

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CLIENT (Browser)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   React UI   â”‚  â”‚  Three.js    â”‚  â”‚  MediaPipe   â”‚      â”‚
â”‚  â”‚  Components  â”‚  â”‚   3D Scene   â”‚  â”‚ Hand Tracker â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                           â”‚                                 â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚              â”‚    React Three Fiber    â”‚                   â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                           â”‚                                 â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚              â”‚     Axios HTTP Client   â”‚                   â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ HTTP/REST
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SERVER (Node.js)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚              â”‚    Express.js Router    â”‚                   â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                           â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Auth Routes â”‚  â”‚ Score Routes â”‚  â”‚ Pref Routes  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                           â”‚                                 â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚              â”‚    Mongoose ODM         â”‚                   â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     DATABASE                                â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚              â”‚       MongoDB           â”‚                   â”‚
â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                   â”‚
â”‚              â”‚  â”‚ Users  â”‚ â”‚ Scores â”‚  â”‚                   â”‚
â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                   â”‚
â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                   â”‚
â”‚              â”‚  â”‚ UserPreferences   â”‚  â”‚                   â”‚
â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                   â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2.2. Kiáº¿n trÃºc Frontend

```
Frontend Architecture
â”œâ”€â”€ App.tsx (Main Component)
â”‚   â”œâ”€â”€ Game State Management
â”‚   â”œâ”€â”€ Audio Management
â”‚   â””â”€â”€ User Authentication
â”œâ”€â”€ Components/
â”‚   â”œâ”€â”€ GameScene.tsx (3D Scene Controller)
â”‚   â”‚   â”œâ”€â”€ Camera & Lighting
â”‚   â”‚   â”œâ”€â”€ Note Spawning
â”‚   â”‚   â””â”€â”€ Collision Detection
â”‚   â”œâ”€â”€ Note.tsx (3D Note Object)
â”‚   â”œâ”€â”€ Saber.tsx (3D Saber Object)
â”‚   â””â”€â”€ WebcamPreview.tsx (MediaPipe Preview)
â”œâ”€â”€ Hooks/
â”‚   â””â”€â”€ useMediaPipe.ts (Hand Tracking Logic)
â”œâ”€â”€ Context/
â”‚   â””â”€â”€ UserContext.tsx (Auth State)
â””â”€â”€ Services/
    â”œâ”€â”€ api.ts (Axios Instance)
    â”œâ”€â”€ auth.service.ts
    â”œâ”€â”€ score.service.ts
    â””â”€â”€ preferences.service.ts
```

#### 3.2.3. Kiáº¿n trÃºc Backend

```
Backend Architecture
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app.ts (Express App Setup)
â”‚   â”œâ”€â”€ server.ts (Server Entry Point)
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ database.ts (MongoDB Connection)
â”‚   â”‚   â”œâ”€â”€ environment.ts (Env Variables)
â”‚   â”‚   â””â”€â”€ jwt.ts (JWT Configuration)
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ User.model.ts
â”‚   â”‚   â”œâ”€â”€ Score.model.ts
â”‚   â”‚   â””â”€â”€ UserPreferences.model.ts
â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”œâ”€â”€ auth.controller.ts
â”‚   â”‚   â”œâ”€â”€ score.controller.ts
â”‚   â”‚   â””â”€â”€ preferences.controller.ts
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ auth.routes.ts
â”‚   â”‚   â”œâ”€â”€ score.routes.ts
â”‚   â”‚   â””â”€â”€ preferences.routes.ts
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”œâ”€â”€ auth.middleware.ts
â”‚   â”‚   â”œâ”€â”€ error.middleware.ts
â”‚   â”‚   â”œâ”€â”€ rateLimit.middleware.ts
â”‚   â”‚   â””â”€â”€ validation.middleware.ts
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ password.util.ts
â”‚       â”œâ”€â”€ token.util.ts
â”‚       â””â”€â”€ validator.util.ts
```

### 3.3. Thiáº¿t káº¿ cÆ¡ sá»Ÿ dá»¯ liá»‡u

#### 3.3.1. Entity Relationship Diagram (ERD)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        USER          â”‚       â”‚        SCORE         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ _id: ObjectId (PK)   â”‚       â”‚ _id: ObjectId (PK)   â”‚
â”‚ email: String        â”‚â—„â”€â”€â”€â”€â”€â”€â”‚ userId: ObjectId(FK) â”‚
â”‚ password: String     â”‚   1:N â”‚ songId: String       â”‚
â”‚ username: String     â”‚       â”‚ songTitle: String    â”‚
â”‚ displayName: String  â”‚       â”‚ songArtist: String   â”‚
â”‚ avatar: String       â”‚       â”‚ songDifficulty: Enum â”‚
â”‚ totalScore: Number   â”‚       â”‚ score: Number        â”‚
â”‚ gamesPlayed: Number  â”‚       â”‚ maxCombo: Number     â”‚
â”‚ highestCombo: Number â”‚       â”‚ multiplier: Number   â”‚
â”‚ lastLogin: Date      â”‚       â”‚ accuracy: Number     â”‚
â”‚ createdAt: Date      â”‚       â”‚ notesHit: Number     â”‚
â”‚ updatedAt: Date      â”‚       â”‚ notesMissed: Number  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ totalNotes: Number   â”‚
          â”‚                    â”‚ rank: Enum           â”‚
          â”‚                    â”‚ playedAt: Date       â”‚
          â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ 1:1
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   USERPREFERENCES    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ _id: ObjectId (PK)   â”‚
â”‚ userId: ObjectId(FK) â”‚
â”‚ saberConfig: Object  â”‚
â”‚   - leftColor        â”‚
â”‚   - rightColor       â”‚
â”‚   - length           â”‚
â”‚   - thickness        â”‚
â”‚ audioVolume: Number  â”‚
â”‚ sfxVolume: Number    â”‚
â”‚ createdAt: Date      â”‚
â”‚ updatedAt: Date      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.3.2. MÃ´ táº£ chi tiáº¿t cÃ¡c báº£ng

**Báº£ng User:**
| TrÆ°á»ng | Kiá»ƒu dá»¯ liá»‡u | MÃ´ táº£ | RÃ ng buá»™c |
|--------|--------------|-------|-----------|
| _id | ObjectId | ID tá»± Ä‘á»™ng | Primary Key |
| email | String | Email Ä‘Äƒng nháº­p | Unique, Required |
| password | String | Máº­t kháº©u Ä‘Ã£ hash | Required, Min: 60 |
| username | String | TÃªn Ä‘Äƒng nháº­p | Unique, 3-20 chars |
| displayName | String | TÃªn hiá»ƒn thá»‹ | Max: 50 |
| totalScore | Number | Tá»•ng Ä‘iá»ƒm | Default: 0 |
| gamesPlayed | Number | Sá»‘ vÃ¡n Ä‘Ã£ chÆ¡i | Default: 0 |
| highestCombo | Number | Combo cao nháº¥t | Default: 0 |

**Báº£ng Score:**
| TrÆ°á»ng | Kiá»ƒu dá»¯ liá»‡u | MÃ´ táº£ | RÃ ng buá»™c |
|--------|--------------|-------|-----------|
| _id | ObjectId | ID tá»± Ä‘á»™ng | Primary Key |
| userId | ObjectId | Reference User | Foreign Key |
| songId | String | ID bÃ i hÃ¡t | Required, Index |
| score | Number | Äiá»ƒm sá»‘ | Required, Min: 0 |
| accuracy | Number | Äá»™ chÃ­nh xÃ¡c % | 0-100 |
| rank | Enum | Háº¡ng (S/A/B/C/D) | Required |
| playedAt | Date | Thá»i Ä‘iá»ƒm chÆ¡i | Index |

### 3.4. Thiáº¿t káº¿ API

#### 3.4.1. Authentication API

| Method | Endpoint | Description | Auth Required |
|--------|----------|-------------|---------------|
| POST | /api/auth/register | ÄÄƒng kÃ½ tÃ i khoáº£n | No |
| POST | /api/auth/login | ÄÄƒng nháº­p | No |
| GET | /api/auth/verify | XÃ¡c thá»±c token | Yes |
| GET | /api/auth/me | Láº¥y thÃ´ng tin user | Yes |
| POST | /api/auth/logout | ÄÄƒng xuáº¥t | Yes |

**Request/Response Examples:**

```json
// POST /api/auth/register
// Request:
{
  "email": "user@example.com",
  "password": "SecurePass123!",
  "username": "player1",
  "displayName": "Pro Player"
}

// Response (201 Created):
{
  "success": true,
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIs...",
    "user": {
      "_id": "507f1f77bcf86cd799439011",
      "email": "user@example.com",
      "username": "player1",
      "displayName": "Pro Player",
      "totalScore": 0,
      "gamesPlayed": 0
    }
  }
}
```

#### 3.4.2. Score API

| Method | Endpoint | Description | Auth Required |
|--------|----------|-------------|---------------|
| POST | /api/scores | LÆ°u Ä‘iá»ƒm má»›i | Yes |
| GET | /api/scores/leaderboard/:songId | Báº£ng xáº¿p háº¡ng | No |
| GET | /api/scores/my-scores | Äiá»ƒm cá»§a user | Yes |
| GET | /api/scores/my-best/:songId | Äiá»ƒm cao nháº¥t | Yes |

#### 3.4.3. Preferences API

| Method | Endpoint | Description | Auth Required |
|--------|----------|-------------|---------------|
| GET | /api/preferences | Láº¥y cÃ i Ä‘áº·t | Yes |
| PATCH | /api/preferences | Cáº­p nháº­t cÃ i Ä‘áº·t | Yes |

### 3.5. Thiáº¿t káº¿ giao diá»‡n

#### 3.5.1. MÃ n hÃ¬nh chÃ­nh (Home)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo] BEAT SABER WEB            [Login] [Register]        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                     â”‚   â”‚
â”‚   â”‚              ğŸ® BEAT SABER                         â”‚   â”‚
â”‚   â”‚           Use Your Hands to Play!                   â”‚   â”‚
â”‚   â”‚                                                     â”‚   â”‚
â”‚   â”‚         [â–¶ START GAME]    [âš™ SETTINGS]            â”‚   â”‚
â”‚   â”‚                                                     â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚   SONG SELECTION:                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ ğŸµ Song 1  â”‚ â”‚ ğŸµ Song 2  â”‚ â”‚ ğŸµ Song 3  â”‚          â”‚
â”‚   â”‚ Easy       â”‚ â”‚ Medium     â”‚ â”‚ Hard       â”‚          â”‚
â”‚   â”‚ BPM: 100   â”‚ â”‚ BPM: 140   â”‚ â”‚ BPM: 150   â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                             â”‚
â”‚   [ğŸ“¤ Upload Custom Song]                                   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.5.2. MÃ n hÃ¬nh chÆ¡i game

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SCORE: 12500    COMBO: 45x    MULTIPLIER: 8x    â¤ï¸â¤ï¸â¤ï¸    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚                    â”‚                   â”‚                    â”‚
â”‚                    â”‚    3D GAME VIEW   â”‚                    â”‚
â”‚                    â”‚                   â”‚                    â”‚
â”‚     [Webcam]       â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚                    â”‚
â”‚     Preview        â”‚    ğŸ”´  ğŸ”µ  ğŸ”´  ğŸ”µ â”‚                    â”‚
â”‚                    â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚                    â”‚
â”‚                    â”‚                   â”‚                    â”‚
â”‚                    â”‚   âš”ï¸          âš”ï¸  â”‚                    â”‚
â”‚                    â”‚  (Saber)  (Saber) â”‚                    â”‚
â”‚                    â”‚                   â”‚                    â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                             â”‚
â”‚              [â¸ PAUSE]                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.5.3. MÃ n hÃ¬nh káº¿t quáº£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      GAME COMPLETE!                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚                         RANK: S                             â”‚
â”‚                                                             â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚              â”‚  SCORE:     125,000     â”‚                    â”‚
â”‚              â”‚  MAX COMBO: 156         â”‚                    â”‚
â”‚              â”‚  ACCURACY:  94.5%       â”‚                    â”‚
â”‚              â”‚  NOTES HIT: 234/248     â”‚                    â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                             â”‚
â”‚            [ğŸ”„ RETRY]  [ğŸ  HOME]  [ğŸ† LEADERBOARD]          â”‚
â”‚                                                             â”‚
â”‚                    NEW HIGH SCORE! ğŸ‰                       â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## CHÆ¯Æ NG 4: TRIá»‚N KHAI Há»† THá»NG

### 4.1. CÃ i Ä‘áº·t mÃ´i trÆ°á»ng phÃ¡t triá»ƒn

#### 4.1.1. YÃªu cáº§u há»‡ thá»‘ng

- Node.js >= 18.x
- npm >= 9.x
- MongoDB >= 6.x
- TrÃ¬nh duyá»‡t há»— trá»£ WebGL vÃ  getUserMedia

#### 4.1.2. CÃ i Ä‘áº·t Frontend

```bash
# Clone project
git clone <repository-url>
cd beat_saber

# Install dependencies
npm install

# Start development server
npm run dev
```

**CÃ¡c dependencies chÃ­nh:**
```json
{
  "dependencies": {
    "@mediapipe/tasks-vision": "0.10.9",
    "@react-three/drei": "9.112.0",
    "@react-three/fiber": "8.17.6",
    "axios": "^1.13.2",
    "lucide-react": "0.436.0",
    "react": "^18.3.1",
    "react-dom": "^18.3.1",
    "three": "0.167.1"
  }
}
```

#### 4.1.3. CÃ i Ä‘áº·t Backend

```bash
# Navigate to backend
cd backend

# Install dependencies
npm install

# Setup environment variables
cp .env.example .env

# Start development server
npm run dev
```

**CÃ¡c dependencies chÃ­nh:**
```json
{
  "dependencies": {
    "bcryptjs": "^3.0.3",
    "cors": "^2.8.5",
    "dotenv": "^17.2.3",
    "express": "^5.2.1",
    "express-rate-limit": "^8.2.1",
    "express-validator": "^7.3.1",
    "jsonwebtoken": "^9.0.3",
    "mongoose": "^9.0.2"
  }
}
```

### 4.2. Triá»ƒn khai Module Hand Tracking

#### 4.2.1. Khá»Ÿi táº¡o MediaPipe Hand Landmarker

```typescript
// useMediaPipe.ts
const setupMediaPipe = async () => {
  const vision = await FilesetResolver.forVisionTasks(
    "https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.9/wasm"
  );
  
  const landmarker = await HandLandmarker.createFromOptions(vision, {
    baseOptions: {
      modelAssetPath: `https://storage.googleapis.com/mediapipe-models/...`,
      delegate: "GPU"  // Sá»­ dá»¥ng GPU acceleration
    },
    runningMode: "VIDEO",
    numHands: 2,
    minHandDetectionConfidence: 0.5,
    minHandPresenceConfidence: 0.5,
    minTrackingConfidence: 0.5
  });
};
```

#### 4.2.2. Chuyá»ƒn Ä‘á»•i tá»a Ä‘á»™ 2D sang 3D

```typescript
const mapHandToWorld = (x: number, y: number): THREE.Vector3 => {
  const GAME_X_RANGE = 5; 
  const GAME_Y_RANGE = 3.5;
  const Y_OFFSET = 0.8;

  // Mirror X coordinate for natural interaction
  const worldX = (0.5 - x) * GAME_X_RANGE; 
  const worldY = (1.0 - y) * GAME_Y_RANGE - (GAME_Y_RANGE / 2) + Y_OFFSET;
  const worldZ = -Math.max(0, worldY * 0.2);

  return new THREE.Vector3(worldX, Math.max(0.1, worldY), worldZ);
};
```

#### 4.2.3. TÃ­nh toÃ¡n Velocity cho Saber

```typescript
const processResults = (results: HandLandmarkerResult) => {
  const now = performance.now();
  const deltaTime = (now - lastTimestamp) / 1000;
  
  for (let i = 0; i < results.landmarks.length; i++) {
    const landmarks = results.landmarks[i];
    const isRight = results.handedness[i][0].categoryName === 'Right';
    
    // Use index finger tip (landmark 8)
    const tip = landmarks[8];
    const worldPos = mapHandToWorld(tip.x, tip.y);
    
    // Calculate velocity
    if (isRight && lastRight) {
      rightVelocity.subVectors(worldPos, lastRight).divideScalar(deltaTime);
    }
  }
};
```

### 4.3. Triá»ƒn khai Module Game Scene

#### 4.3.1. Note Spawning System

```typescript
useFrame((state, delta) => {
  const time = audioRef.current.currentTime;
  
  // Calculate spawn ahead time based on note speed
  const spawnAheadTime = Math.abs(SPAWN_Z - PLAYER_Z) / NOTE_SPEED;
  
  // Spawn notes that are about to appear
  while (nextNoteIndex < notes.length) {
    const nextNote = notes[nextNoteIndex];
    if (nextNote.time - spawnAheadTime <= time) {
      activeNotes.push(nextNote);
      nextNoteIndex++;
    } else {
      break;
    }
  }
});
```

#### 4.3.2. Collision Detection

```typescript
// Check if saber is close to note
if (currentZ > PLAYER_Z - 2.0 && currentZ < PLAYER_Z + 1.5) {
  const handPos = note.type === 'left' ? hands.left : hands.right;
  
  if (handPos) {
    const notePos = new THREE.Vector3(
      LANE_X_POSITIONS[note.lineIndex],
      LAYER_Y_POSITIONS[note.lineLayer],
      currentZ
    );
    
    // Distance threshold for hit detection
    if (handPos.distanceTo(notePos) < 1.2) {
      // Check cut direction
      let goodCut = true;
      const speed = handVel.length();
      
      if (note.cutDirection !== CutDirection.ANY) {
        const requiredDir = DIRECTION_VECTORS[note.cutDirection];
        const dot = handVel.normalize().dot(requiredDir);
        if (dot < 0.2 || speed < 0.8) {
          goodCut = false;
        }
      }
      
      handleHit(note, goodCut);
    }
  }
}
```

#### 4.3.3. Audio-based Chart Generation

```typescript
const generateChartFromAudio = (
  audioBuffer: AudioBuffer, 
  bpm: number, 
  difficulty: 'Easy' | 'Medium' | 'Hard'
): NoteData[] => {
  const rawData = audioBuffer.getChannelData(0);
  const sampleRate = audioBuffer.sampleRate;
  
  // Calculate global average for normalization
  let totalSum = 0;
  for (let i = 0; i < rawData.length; i += analyzeStep) {
    totalSum += Math.abs(rawData[i]);
  }
  const globalAverage = totalSum / sampleCount;
  
  // Beat subdivision based on difficulty
  let beatSubdivision = 1; // Easy: quarter notes
  if (difficulty === 'Medium') beatSubdivision = 2; // 8th notes
  if (difficulty === 'Hard') beatSubdivision = 4; // 16th notes
  
  // Grid-based note generation
  const stepTime = (60 / bpm) / beatSubdivision;
  
  for (let t = startTime; t < duration; t += stepTime) {
    // Calculate RMS at this time point
    const rms = calculateRMS(rawData, t, sampleRate);
    
    // Spawn note if audio is loud enough
    if (rms > globalAverage * sensitivity) {
      notes.push({
        id: `gen-${idCount++}`,
        time: t,
        lineIndex: calculateLane(t),
        lineLayer: calculateLayer(rms),
        type: alternateHand(),
        cutDirection: CutDirection.ANY
      });
    }
  }
  
  return notes;
};
```

### 4.4. Triá»ƒn khai Module Authentication

#### 4.4.1. User Registration

```typescript
// auth.controller.ts
export const register = async (req, res, next) => {
  const { email, password, username, displayName } = req.body;
  
  // Check existing user
  const existingUser = await User.findOne({
    $or: [{ email }, { username }]
  });
  
  if (existingUser) {
    throw new ApiError(409, 'Email or username already exists');
  }
  
  // Hash password with bcrypt
  const hashedPassword = await bcrypt.hash(password, 12);
  
  // Create user
  const user = await User.create({
    email,
    password: hashedPassword,
    username,
    displayName: displayName || username
  });
  
  // Create default preferences
  await UserPreferences.create({ userId: user._id });
  
  // Generate JWT
  const token = jwt.sign(
    { id: user._id, email: user.email },
    process.env.JWT_SECRET,
    { expiresIn: '7d' }
  );
  
  res.status(201).json({ success: true, data: { token, user } });
};
```

#### 4.4.2. JWT Authentication Middleware

```typescript
// auth.middleware.ts
export const authenticate = async (req, res, next) => {
  const authHeader = req.headers.authorization;
  
  if (!authHeader?.startsWith('Bearer ')) {
    return res.status(401).json({ error: 'No token provided' });
  }
  
  const token = authHeader.split(' ')[1];
  
  try {
    const decoded = jwt.verify(token, process.env.JWT_SECRET);
    const user = await User.findById(decoded.id);
    
    if (!user) {
      return res.status(401).json({ error: 'User not found' });
    }
    
    req.user = user;
    next();
  } catch (error) {
    return res.status(401).json({ error: 'Invalid token' });
  }
};
```

### 4.5. Triá»ƒn khai Module Score & Leaderboard

#### 4.5.1. Submit Score

```typescript
// score.controller.ts
export const submitScore = async (req, res, next) => {
  const userId = req.user._id;
  const {
    songId, songTitle, songArtist, songDifficulty,
    score, maxCombo, accuracy, notesHit, notesMissed
  } = req.body;
  
  // Calculate rank
  const rank = calculateRank(accuracy);
  
  // Create score record
  const newScore = await Score.create({
    userId,
    songId,
    songTitle,
    songArtist,
    songDifficulty,
    score,
    maxCombo,
    accuracy,
    notesHit,
    notesMissed,
    totalNotes: notesHit + notesMissed,
    rank
  });
  
  // Update user stats
  await User.findByIdAndUpdate(userId, {
    $inc: { totalScore: score, gamesPlayed: 1 },
    $max: { highestCombo: maxCombo }
  });
  
  res.status(201).json({ success: true, data: newScore });
};

const calculateRank = (accuracy: number): string => {
  if (accuracy >= 95) return 'S';
  if (accuracy >= 85) return 'A';
  if (accuracy >= 70) return 'B';
  if (accuracy >= 50) return 'C';
  return 'D';
};
```

#### 4.5.2. Leaderboard Query

```typescript
// score.controller.ts
export const getLeaderboard = async (req, res, next) => {
  const { songId } = req.params;
  const { difficulty, limit = 50 } = req.query;
  
  const match: any = { songId };
  if (difficulty) match.songDifficulty = difficulty;
  
  const leaderboard = await Score.aggregate([
    { $match: match },
    { $sort: { score: -1, playedAt: 1 } },
    { $limit: parseInt(limit) },
    {
      $lookup: {
        from: 'users',
        localField: 'userId',
        foreignField: '_id',
        as: 'user'
      }
    },
    { $unwind: '$user' },
    {
      $project: {
        score: 1,
        maxCombo: 1,
        accuracy: 1,
        rank: 1,
        playedAt: 1,
        'user.username': 1,
        'user.displayName': 1
      }
    }
  ]);
  
  // Add rank numbers
  const result = leaderboard.map((entry, index) => ({
    ...entry,
    rank: index + 1
  }));
  
  res.json({ success: true, data: { leaderboard: result } });
};
```

### 4.6. CÃ¡c ká»¹ thuáº­t tá»‘i Æ°u hÃ³a

#### 4.6.1. Frontend Performance

1. **React Three Fiber Optimizations:**
   - Sá»­ dá»¥ng `useMemo` cho geometry vÃ  materials
   - Sá»­ dá»¥ng `useRef` thay vÃ¬ state cho dá»¯ liá»‡u thay Ä‘á»•i liÃªn tá»¥c
   - TrÃ¡nh re-render khÃ´ng cáº§n thiáº¿t vá»›i `React.memo`

2. **MediaPipe Optimizations:**
   - GPU delegate cho xá»­ lÃ½ nhanh hÆ¡n
   - Resolution phÃ¹ há»£p (640x480)
   - Frame skipping khi cáº§n thiáº¿t

3. **Audio Analysis:**
   - Downsample Ä‘á»ƒ phÃ¢n tÃ­ch nhanh hÆ¡n
   - Cache káº¿t quáº£ chart generation

#### 4.6.2. Backend Performance

1. **Database Indexes:**
```javascript
ScoreSchema.index({ songId: 1, score: -1 });
ScoreSchema.index({ userId: 1, playedAt: -1 });
UserSchema.index({ totalScore: -1 });
```

2. **Rate Limiting:**
```typescript
const apiLimiter = rateLimit({
  windowMs: 15 * 60 * 1000, // 15 minutes
  max: 100 // limit each IP to 100 requests per window
});
```

3. **Response Compression:**
   - Gzip compression cho responses
   - JSON payload optimization

---

## CHÆ¯Æ NG 5: Káº¾T QUáº¢ VÃ€ ÄÃNH GIÃ

### 5.1. Káº¿t quáº£ Ä‘áº¡t Ä‘Æ°á»£c

#### 5.1.1. Vá» chá»©c nÄƒng

| STT | Chá»©c nÄƒng | Tráº¡ng thÃ¡i | Ghi chÃº |
|-----|-----------|------------|---------|
| 1 | Nháº­n diá»‡n cá»­ chá»‰ tay | âœ… HoÃ n thÃ nh | Äá»™ chÃ­nh xÃ¡c cao |
| 2 | Hiá»ƒn thá»‹ 3D Scene | âœ… HoÃ n thÃ nh | Smooth 60 FPS |
| 3 | Há»‡ thá»‘ng notes | âœ… HoÃ n thÃ nh | Äá»“ng bá»™ nháº¡c tá»‘t |
| 4 | Collision detection | âœ… HoÃ n thÃ nh | Responsive |
| 5 | ÄÄƒng kÃ½/ÄÄƒng nháº­p | âœ… HoÃ n thÃ nh | JWT secured |
| 6 | LÆ°u Ä‘iá»ƒm | âœ… HoÃ n thÃ nh | Real-time |
| 7 | Leaderboard | âœ… HoÃ n thÃ nh | Filter by difficulty |
| 8 | TÃ¹y chá»‰nh saber | âœ… HoÃ n thÃ nh | Color, size |
| 9 | Upload custom song | âœ… HoÃ n thÃ nh | Auto chart gen |

#### 5.1.2. Vá» hiá»‡u suáº¥t

| Metric | Target | Actual | Status |
|--------|--------|--------|--------|
| FPS | â‰¥30 | 55-60 | âœ… |
| Hand tracking latency | <100ms | ~50ms | âœ… |
| API response time | <500ms | ~150ms | âœ… |
| Time to first note | <3s | ~2s | âœ… |

#### 5.1.3. Giao diá»‡n ngÆ°á»i dÃ¹ng

- Thiáº¿t káº¿ hiá»‡n Ä‘áº¡i vá»›i style neo-brutalism
- Responsive trÃªn cÃ¡c kÃ­ch thÆ°á»›c mÃ n hÃ¬nh
- Hiá»‡u á»©ng visual háº¥p dáº«n (Trail, Glow, Particles)
- Feedback rÃµ rÃ ng cho ngÆ°á»i chÆ¡i

### 5.2. Demo cÃ¡c chá»©c nÄƒng chÃ­nh

#### 5.2.1. Gameplay Flow

1. **MÃ n hÃ¬nh chÃ­nh:** Hiá»ƒn thá»‹ danh sÃ¡ch bÃ i hÃ¡t, nÃºt báº¯t Ä‘áº§u
2. **Camera setup:** Request quyá»n truy cáº­p webcam
3. **Game play:** Notes xuáº¥t hiá»‡n theo nháº¡c, ngÆ°á»i chÆ¡i dÃ¹ng tay chÃ©m
4. **Score display:** Äiá»ƒm, combo, multiplier cáº­p nháº­t real-time
5. **End screen:** Hiá»ƒn thá»‹ káº¿t quáº£, rank, option retry/home

#### 5.2.2. User Flow

1. ÄÄƒng kÃ½ tÃ i khoáº£n má»›i
2. ÄÄƒng nháº­p vÃ o há»‡ thá»‘ng
3. TÃ¹y chá»‰nh saber trong Settings
4. ChÆ¡i game vÃ  ghi Ä‘iá»ƒm
5. Xem leaderboard so sÃ¡nh vá»›i ngÆ°á»i khÃ¡c

### 5.3. Háº¡n cháº¿ vÃ  váº¥n Ä‘á»

1. **Ãnh sÃ¡ng mÃ´i trÆ°á»ng:** Nháº­n diá»‡n tay cÃ³ thá»ƒ bá»‹ áº£nh hÆ°á»Ÿng bá»Ÿi Ã¡nh sÃ¡ng yáº¿u
2. **Khoáº£ng cÃ¡ch camera:** Cáº§n ngá»“i/Ä‘á»©ng Ä‘Ãºng khoáº£ng cÃ¡ch vá»›i webcam
3. **Performance thiáº¿t bá»‹ yáº¿u:** CÃ³ thá»ƒ giáº£m FPS trÃªn mÃ¡y cáº¥u hÃ¬nh tháº¥p
4. **Äá»™ trá»… máº¡ng:** Leaderboard cáº§n káº¿t ná»‘i internet á»•n Ä‘á»‹nh

### 5.4. So sÃ¡nh vá»›i cÃ¡c sáº£n pháº©m tÆ°Æ¡ng tá»±

| TÃ­nh nÄƒng | Beat Saber (VR) | Beat Saber Web | Air Guitar Games |
|-----------|-----------------|----------------|------------------|
| YÃªu cáº§u thiáº¿t bá»‹ | VR Headset | Webcam | Webcam/Kinect |
| Chi phÃ­ | ~$30 + VR | Free | Free |
| Äá»“ há»a | AAA | Good | Basic |
| Äá»™ chÃ­nh xÃ¡c | Very High | High | Medium |
| Multiplayer | Yes | Leaderboard | Limited |
| Custom songs | Yes | Yes | No |

---

## CHÆ¯Æ NG 6: Káº¾T LUáº¬N VÃ€ HÆ¯á»šNG PHÃT TRIá»‚N

### 6.1. Káº¿t luáº­n

Qua quÃ¡ trÃ¬nh nghiÃªn cá»©u vÃ  thá»±c hiá»‡n Ä‘á»“ Ã¡n, nhÃ³m Ä‘Ã£ hoÃ n thÃ nh Ä‘Æ°á»£c cÃ¡c má»¥c tiÃªu Ä‘á» ra:

1. **NghiÃªn cá»©u thÃ nh cÃ´ng** cÃ´ng nghá»‡ nháº­n diá»‡n cá»­ chá»‰ MediaPipe vÃ  Ã¡p dá»¥ng vÃ o game.

2. **XÃ¢y dá»±ng hoÃ n chá»‰nh** há»‡ thá»‘ng frontend vá»›i React, Three.js, React Three Fiber táº¡o tráº£i nghiá»‡m 3D mÆ°á»£t mÃ .

3. **PhÃ¡t triá»ƒn backend** RESTful API Ä‘áº§y Ä‘á»§ vá»›i Node.js, Express, MongoDB Ä‘Ã¡p á»©ng cÃ¡c chá»©c nÄƒng authentication, score management, preferences.

4. **Triá»ƒn khai thuáº­t toÃ¡n** phÃ¢n tÃ­ch Ã¢m thanh Ä‘á»ƒ tá»± Ä‘á»™ng táº¡o note chart tá»« bÃ i nháº¡c.

5. **Äáº£m báº£o hiá»‡u suáº¥t** game cháº¡y á»•n Ä‘á»‹nh 60 FPS vá»›i Ä‘á»™ trá»… nháº­n diá»‡n tay dÆ°á»›i 100ms.

**Äiá»ƒm ná»•i báº­t cá»§a dá»± Ã¡n:**
- Cho phÃ©p chÆ¡i Beat Saber khÃ´ng cáº§n thiáº¿t bá»‹ VR
- Tá»± Ä‘á»™ng táº¡o beatmap tá»« nháº¡c upload
- Há»‡ thá»‘ng leaderboard cáº¡nh tranh
- Giao diá»‡n ngÆ°á»i dÃ¹ng hiá»‡n Ä‘áº¡i

### 6.2. BÃ i há»c kinh nghiá»‡m

- **Vá» ká»¹ thuáº­t:** Há»c Ä‘Æ°á»£c cÃ¡ch tÃ­ch há»£p nhiá»u cÃ´ng nghá»‡ (MediaPipe, Three.js, React) vÃ o má»™t dá»± Ã¡n thá»‘ng nháº¥t.
- **Vá» quáº£n lÃ½:** Táº§m quan trá»ng cá»§a viá»‡c lÃªn káº¿ hoáº¡ch vÃ  phÃ¢n chia cÃ´ng viá»‡c rÃµ rÃ ng.
- **Vá» tá»‘i Æ°u:** Ká»¹ nÄƒng profiling vÃ  tá»‘i Æ°u hiá»‡u suáº¥t cho web application.

### 6.3. HÆ°á»›ng phÃ¡t triá»ƒn

#### 6.3.1. Ngáº¯n háº¡n (1-3 thÃ¡ng)

- [ ] ThÃªm nhiá»u bÃ i hÃ¡t máº·c Ä‘á»‹nh hÆ¡n
- [ ] Cáº£i thiá»‡n thuáº­t toÃ¡n táº¡o chart
- [ ] ThÃªm hiá»‡u á»©ng visual (particles, explosions)
- [ ] Mobile responsive support
- [ ] Social sharing Ä‘iá»ƒm sá»‘

#### 6.3.2. Trung háº¡n (3-6 thÃ¡ng)

- [ ] Multiplayer real-time vá»›i WebSocket
- [ ] Community song sharing platform
- [ ] Achievement system vÃ  badges
- [ ] Tutorial mode cho ngÆ°á»i má»›i
- [ ] Replay system

#### 6.3.3. DÃ i háº¡n (6-12 thÃ¡ng)

- [ ] AI difficulty adjustment
- [ ] VR support (WebXR)
- [ ] Full body tracking
- [ ] Tournament system
- [ ] Mobile app vá»›i React Native

### 6.4. Äá» xuáº¥t má»Ÿ rá»™ng

1. **Machine Learning Enhancement:**
   - Sá»­ dá»¥ng ML Ä‘á»ƒ cáº£i thiá»‡n Ä‘á»™ chÃ­nh xÃ¡c nháº­n diá»‡n
   - Adaptive difficulty dá»±a trÃªn player performance

2. **Social Features:**
   - Friend system
   - Direct challenge
   - Global/Regional leaderboards

3. **Content Creation:**
   - In-browser beatmap editor
   - Community voting cho maps
   - Creator monetization

---

## TÃ€I LIá»†U THAM KHáº¢O

### SÃ¡ch vÃ  tÃ i liá»‡u

1. Chinwoke, C. (2023). *React Three Fiber: Create 3D Graphics for the Web*. Packt Publishing.

2. Danchilla, B. (2012). *Beginning WebGL for HTML5*. Apress.

3. Parisi, T. (2022). *Learning Three.js: Programming 3D animations and visualizations for the web*. Packt Publishing.

### TÃ i liá»‡u trá»±c tuyáº¿n

4. MediaPipe Solutions Documentation. Google. https://developers.google.com/mediapipe

5. Three.js Documentation. https://threejs.org/docs/

6. React Three Fiber Documentation. https://docs.pmnd.rs/react-three-fiber

7. React Three Drei Documentation. https://github.com/pmndrs/drei

8. MongoDB Documentation. https://docs.mongodb.com/

9. Express.js Documentation. https://expressjs.com/

10. JSON Web Token (JWT) - RFC 7519. https://tools.ietf.org/html/rfc7519

### BÃ i bÃ¡o vÃ  nghiÃªn cá»©u

11. Zhang, F., et al. (2020). "MediaPipe Hands: On-device Real-time Hand Tracking." *arXiv preprint arXiv:2006.10214*.

12. Pavllo, D., et al. (2019). "3D human pose estimation in video with temporal convolutions and semi-supervised training." *CVPR 2019*.

---

## PHá»¤ Lá»¤C

### Phá»¥ lá»¥c A: Cáº¥u trÃºc thÆ° má»¥c dá»± Ã¡n

```
beat_saber/
â”œâ”€â”€ App.tsx                 # Main application component
â”œâ”€â”€ constants.ts            # Game constants and chart generator
â”œâ”€â”€ index.css               # Global styles
â”œâ”€â”€ index.html              # HTML entry point
â”œâ”€â”€ index.tsx               # React entry point
â”œâ”€â”€ types.ts                # TypeScript type definitions
â”œâ”€â”€ package.json            # Frontend dependencies
â”œâ”€â”€ vite.config.ts          # Vite bundler config
â”œâ”€â”€ tsconfig.json           # TypeScript config
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ GameScene.tsx       # 3D game scene controller
â”‚   â”œâ”€â”€ Note.tsx            # 3D note component
â”‚   â”œâ”€â”€ Saber.tsx           # 3D saber component
â”‚   â””â”€â”€ WebcamPreview.tsx   # Webcam preview overlay
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useMediaPipe.ts     # Hand tracking hook
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ Leaderboard.tsx
â”‚   â”‚   â”œâ”€â”€ ProfileMenu.tsx
â”‚   â”‚   â””â”€â”€ auth/
â”‚   â”‚       â”œâ”€â”€ LoginModal.tsx
â”‚   â”‚       â””â”€â”€ RegisterModal.tsx
â”‚   â”œâ”€â”€ context/
â”‚   â”‚   â””â”€â”€ UserContext.tsx
â”‚   â””â”€â”€ services/
â”‚       â”œâ”€â”€ api.ts
â”‚       â”œâ”€â”€ auth.service.ts
â”‚       â”œâ”€â”€ preferences.service.ts
â”‚       â””â”€â”€ score.service.ts
â””â”€â”€ backend/
    â”œâ”€â”€ package.json
    â”œâ”€â”€ tsconfig.json
    â””â”€â”€ src/
        â”œâ”€â”€ app.ts
        â”œâ”€â”€ server.ts
        â”œâ”€â”€ config/
        â”‚   â”œâ”€â”€ database.ts
        â”‚   â”œâ”€â”€ environment.ts
        â”‚   â””â”€â”€ jwt.ts
        â”œâ”€â”€ controllers/
        â”‚   â”œâ”€â”€ auth.controller.ts
        â”‚   â”œâ”€â”€ preferences.controller.ts
        â”‚   â””â”€â”€ score.controller.ts
        â”œâ”€â”€ middleware/
        â”‚   â”œâ”€â”€ auth.middleware.ts
        â”‚   â”œâ”€â”€ error.middleware.ts
        â”‚   â”œâ”€â”€ rateLimit.middleware.ts
        â”‚   â””â”€â”€ validation.middleware.ts
        â”œâ”€â”€ models/
        â”‚   â”œâ”€â”€ Score.model.ts
        â”‚   â”œâ”€â”€ User.model.ts
        â”‚   â””â”€â”€ UserPreferences.model.ts
        â”œâ”€â”€ routes/
        â”‚   â”œâ”€â”€ auth.routes.ts
        â”‚   â”œâ”€â”€ preferences.routes.ts
        â”‚   â””â”€â”€ score.routes.ts
        â””â”€â”€ utils/
            â”œâ”€â”€ password.util.ts
            â”œâ”€â”€ token.util.ts
            â””â”€â”€ validator.util.ts
```

### Phá»¥ lá»¥c B: Biáº¿n mÃ´i trÆ°á»ng

**Frontend (.env):**
```env
VITE_API_URL=http://localhost:5000/api
```

**Backend (.env):**
```env
NODE_ENV=development
PORT=5000
MONGODB_URI=mongodb://localhost:27017/beatsaber
JWT_SECRET=your-secret-key
JWT_EXPIRES_IN=7d
CORS_ORIGIN=http://localhost:5173
```

### Phá»¥ lá»¥c C: API Endpoints Summary

| Endpoint | Method | Description | Auth |
|----------|--------|-------------|------|
| /api/auth/register | POST | User registration | No |
| /api/auth/login | POST | User login | No |
| /api/auth/verify | GET | Token verification | Yes |
| /api/auth/me | GET | Get current user | Yes |
| /api/scores | POST | Submit score | Yes |
| /api/scores/leaderboard/:songId | GET | Get leaderboard | No |
| /api/scores/my-scores | GET | Get user's scores | Yes |
| /api/preferences | GET | Get preferences | Yes |
| /api/preferences | PATCH | Update preferences | Yes |
| /health | GET | Health check | No |

---

**NgÃ y hoÃ n thÃ nh bÃ¡o cÃ¡o:** [NgÃ y/ThÃ¡ng/NÄƒm]

**XÃ¡c nháº­n cá»§a sinh viÃªn:**

[Chá»¯ kÃ½ sinh viÃªn]

**XÃ¡c nháº­n cá»§a giáº£ng viÃªn hÆ°á»›ng dáº«n:**

[Chá»¯ kÃ½ giáº£ng viÃªn]
